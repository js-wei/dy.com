<!DOCTYPE html>
<html class="">
<head>
    <title>JSAPI</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="__CSS__/bootstrap/bootstrap.css" rel="stylesheet">
    <link href="__CSS__/bootstrap/bootstrap-overrides.css" rel="stylesheet">
    <link rel="stylesheet" href="__CSS__/lib/font-awesome.css">
    <![endif]-->
    <!-- scripts -->
    <script src="__JS__/jquery-1.11.1.js"></script>
    <script src="__JS__/bootstrap.min.js"></script>
    <script src="__PLUG__/layer/layer.js"></script>
    <script src="http://res.wx.qq.com/open/js/jweixin-1.0.0.js"></script>
</head>
<body>
    <button class="btn btn-danger share">微信分享</button>
<include file="public:footer"/>
<script>
    wx.config({
        debug: false,
        appId: '<?php echo $options["appId"];?>',
        timestamp: '<?php echo $options["timestamp"];?>',
        nonceStr: '<?php echo $options["nonceStr"];?>',
        signature: '<?php echo $options["signature"];?>',
        jsApiList: [
            // 所有要调用的 API 都要加到这个列表中
            'checkJsApi',
            'openLocation',
            'getLocation',
            'onMenuShareTimeline',
            'onMenuShareAppMessage'
        ]
    });
    wx.ready(function(){
        $(document).on('click','.share',function(){
            wx.onMenuShareAppMessage({
                title: '测试分享', // 分享标题
                desc: '测试分享', // 分享描述
                link: 'http://baidu.com', // 分享链接，该链接域名或路径必须与当前页面对应的公众号JS安全域名一致
                imgUrl: 'https://ss0.bdstatic.com/5aV1bjqh_Q23odCf/static/superman/img/logo/bd_logo1_31bdc765.png', // 分享图标
                type: '', // 分享类型,music、video或link，不填默认为link
                dataUrl: '', // 如果type是music或video，则要提供数据链接，默认为空
                success: function () {
                    // 用户确认分享后执行的回调函数
                    alert('分享成功');
                },
                cancel: function () {
                    // 用户取消分享后执行的回调函数
                    alert('取消分享');
                }
            });
        });
    });
</script>